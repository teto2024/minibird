# ワールドボス ベテランと中間レベル追加

このドキュメントは、ワールドボスシステムに追加されたベテランボスと中間レベルボスについて説明します。

## 変更内容

### 1. データベーススキーマの変更

#### world_bossesテーブルに新しいカラムを追加
- `labels` VARCHAR(255) - ボスのラベル（例: "ベテラン"）を格納するカラム

### 2. 新規ボスの追加

#### 中間レベルボス（10体）
既存のボスの間のレベルに、新しいボスを追加しました。ステータスと報酬は既存のボスの間を取るように設定されています。

| レベル | 名前 | 召喚コスト | 体力 | 攻撃力 | 防御力 |
|--------|------|------------|------|--------|--------|
| Lv5    | ゴブリン・ダガス | 5💎 | 500,000 | 150 | 50 |
| Lv15   | 悪魔・モルゲート | 17💎 | 3,000,000 | 375 | 120 |
| Lv25   | アイガオン | 37💎 | 10,000,000 | 625 | 195 |
| Lv35   | アンデバブ | 75💎 | 32,500,000 | 875 | 270 |
| Lv45   | バクスト | 150💎 | 100,000,000 | 1,250 | 375 |
| Lv55   | オセアノの蛇 | 300💎 | 325,000,000 | 2,000 | 525 |
| Lv65   | トロールの化身 | 500💎 | 750,000,000 | 3,000 | 750 |
| Lv75   | コンデット | 800💎 | 2,000,000,000 | 4,250 | 1,200 |
| Lv85   | ビースト軍団 | 1,500💎 | 6,500,000,000 | 6,250 | 1,950 |
| Lv95   | エピックゴーレム | 3,500💎 | 30,000,000,000 | 11,250 | 3,450 |

#### ベテランボス（10体）
既存のLv10, 20, 30, 40, 50, 60, 70, 80, 90, 100のボスに、より強力なベテラン版を追加しました。

**ベテランボスの特徴:**
- 名前に「(ベテラン)」が付く
- 召喚コストが**2倍**
- 体力が**5倍**
- `labels`フィールドに「ベテラン」が設定される
- 報酬:
  - コインが**2倍**
  - クリスタルとダイヤモンドは**同じ**
  - 資源が**2倍**

| レベル | 元のボス | ベテラン召喚コスト | ベテラン体力 |
|--------|----------|-------------------|-------------|
| Lv10   | 巨神タイタン | 20💎 (元: 10💎) | 5,000,000 (元: 1,000,000) |
| Lv20   | 九頭竜ヒュドラ | 50💎 (元: 25💎) | 25,000,000 (元: 5,000,000) |
| Lv30   | 不死鳥フェニックス | 100💎 (元: 50💎) | 75,000,000 (元: 15,000,000) |
| Lv40   | 海魔クラーケン | 200💎 (元: 100💎) | 250,000,000 (元: 50,000,000) |
| Lv50   | 魔獣ベヒモス | 400💎 (元: 200💎) | 750,000,000 (元: 150,000,000) |
| Lv60   | 混沌龍カオス | 800💎 (元: 400💎) | 2,500,000,000 (元: 500,000,000) |
| Lv70   | 戦神マルス | 1,200💎 (元: 600💎) | 5,000,000,000 (元: 1,000,000,000) |
| Lv80   | 世界喰いジョルムンガンド | 2,000💎 (元: 1,000💎) | 15,000,000,000 (元: 3,000,000,000) |
| Lv90   | 虚無王 | 4,000💎 (元: 2,000💎) | 50,000,000,000 (元: 10,000,000,000) |
| Lv100  | 宇宙創造神 | 10,000💎 (元: 5,000💎) | 250,000,000,000 (元: 50,000,000,000) |

### 3. API の変更

#### world_boss_api.php

`get_bosses` アクションに新しいフィルターパラメータを追加:

```javascript
// フィルターなし - 全てのボスを表示
{
  "action": "get_bosses"
}

// ベテランボスのみ表示
{
  "action": "get_bosses",
  "filter_label": "veteran"
}

// 通常ボスのみ表示
{
  "action": "get_bosses",
  "filter_label": "normal"
}
```

レスポンスにも `labels` フィールドが追加され、ボスがベテランかどうかを識別できます。

## 適用方法

以下のSQLファイルを実行してください:

```bash
mysql -u [username] -p microblog < world_boss_veteran_and_intermediate_levels.sql
```

または、PHPの管理画面から実行することもできます。

## 注意事項

- `INSERT IGNORE` を使用しているため、既存のデータには影響しません
- `ALTER TABLE` で `labels` カラムを追加する際、既存のボスには NULL が設定されます
- 既存のデータベースに追加する場合、必ずバックアップを取ってから実行してください
- resource_type_id は 1〜8 (食料、木材、石材、青銅、鉄、金、知識、石油) を想定しています

## テスト

1. データベースにスキーマを適用
2. ワールドボスAPI (`world_boss_api.php?action=get_bosses`) を呼び出して、新しいボスが表示されることを確認
3. フィルター機能をテスト:
   - `filter_label=veteran` でベテランボスのみ表示
   - `filter_label=normal` で通常ボスのみ表示
4. ベテランボスを召喚して、コストと体力が正しいことを確認
5. ベテランボスを倒して、報酬が正しく配布されることを確認
