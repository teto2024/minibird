-- ===============================================
-- MiniBird æ©Ÿèƒ½è¿½åŠ ãƒ»ä¿®æ­£ã‚¹ã‚­ãƒ¼ãƒ 2026
-- â‘  å…µå£«ç”»é¢ã®çµã‚Šè¾¼ã¿æ©Ÿèƒ½ï¼ˆPHPã§å®Ÿè£…æ¸ˆã¿ï¼‰
-- â‘¡ å…µç¨®ç›¸æ€§ã®ç¢ºèªï¼ˆæ—¢å­˜ã®4ã™ãã¿ã‚’ç¶­æŒã€æ”»åŸã¯æ­©å…µã«å¼·ãé¨å…µã«å¼±ã„ï¼‰
-- â‘¢ ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¹ã‚­ãƒ«ã®ç™ºå‹•ç‡ã¨ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šé™è¦‹ç›´ã—ï¼ˆbattle_engine.phpã§å®Ÿè£…æ¸ˆã¿ï¼‰
-- â‘£ ã‚«ã‚ªã‚¹ãƒ­ãƒ¼ãƒ‰ã®ã‚¹ã‚­ãƒ«ã‚’2ã‚¿ãƒ¼ãƒ³æ°—çµ¶ã«å¤‰æ›´
-- â‘¤ ãƒ‡ã‚¤ãƒªãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¹ã‚¯ã®è¿½åŠ ã¨çµŒé¨“å€¤å¢—åŠ 
-- ===============================================

USE microblog;

-- ===============================================
-- â‘£ ã‚«ã‚ªã‚¹ãƒ­ãƒ¼ãƒ‰ã®ã‚¹ã‚­ãƒ«ã‚’ã€Œæ··æ²Œã®æ¸¦ã€ã‹ã‚‰ã€Œ2ã‚¿ãƒ¼ãƒ³æ°—çµ¶ã€ã«å¤‰æ›´
-- ãƒ©ãƒ³ãƒ€ãƒ åŠ¹æœã¯åˆ†ã‹ã‚Šã«ãã„ãŸã‚ã€2ã‚¿ãƒ¼ãƒ³æ°—çµ¶ã«ä¸€æœ¬åŒ–
-- ===============================================

UPDATE heroes 
SET 
    battle_skill_name = 'æ··æ²Œã®æ”¯é…',
    battle_skill_desc = 'æ•µã‚’2ã‚¿ãƒ¼ãƒ³æ°—çµ¶ã•ã›ã€è¡Œå‹•ä¸èƒ½ã«ã™ã‚‹',
    battle_skill_effect = '{"stun_duration": 2}'
WHERE hero_key = 'chaos_lord';

-- ===============================================
-- â‘£ ã‚·ãƒ£ãƒ‰ã‚¦ã‚¢ã‚µã‚·ãƒ³ã®ã‚¹ã‚­ãƒ«è¦‹ç›´ã—ï¼ˆå³æ­»ç¢ºç‡ã‚’ä¸‹ã’ã‚‹ï¼‰
-- 50%å³æ­»ã¯å¼·ã™ãã‚‹ãŸã‚ã€20%ã®åŠå£Šã«å¤‰æ›´æ¸ˆã¿ï¼ˆç¢ºèªï¼‰
-- ===============================================

UPDATE heroes 
SET 
    battle_skill_name = 'æš—æ®º',
    battle_skill_desc = '20%ã®ç¢ºç‡ã§æ•µã®HPã‚’åŠåˆ†ã«ã™ã‚‹ï¼ˆãƒœã‚¹ç„¡åŠ¹ï¼‰',
    battle_skill_effect = '{"half_kill_chance": 20}'
WHERE hero_key = 'shadow_assassin';

-- ===============================================
-- â‘¤ ãƒ‡ã‚¤ãƒªãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¹ã‚¯ã®è¿½åŠ 
-- æ–°è¦ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã€æ—¢å­˜ã‚¿ã‚¹ã‚¯ã®çµŒé¨“å€¤ã‚’å¢—åŠ 
-- ===============================================

-- æ—¢å­˜ã‚¿ã‚¹ã‚¯ã®çµŒé¨“å€¤ã‚’å¢—åŠ 
UPDATE civilization_daily_tasks SET reward_exp = 20 WHERE task_key = 'daily_login';
UPDATE civilization_daily_tasks SET reward_exp = 40 WHERE task_key = 'daily_collect';
UPDATE civilization_daily_tasks SET reward_exp = 60 WHERE task_key = 'daily_build';
UPDATE civilization_daily_tasks SET reward_exp = 50 WHERE task_key = 'daily_train';
UPDATE civilization_daily_tasks SET reward_exp = 80 WHERE task_key = 'daily_battle';
UPDATE civilization_daily_tasks SET reward_exp = 30 WHERE task_key = 'daily_invest';
UPDATE civilization_daily_tasks SET reward_exp = 70 WHERE task_key = 'daily_research';

-- æ–°è¦ãƒ‡ã‚¤ãƒªãƒ¼ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ 
INSERT IGNORE INTO civilization_daily_tasks (task_key, name, description, icon, task_type, target_count, reward_coins, reward_crystals, reward_diamonds, reward_exp) VALUES
('daily_heal', 'è² å‚·å…µã‚’æ²»ç™‚', 'è² å‚·å…µã‚’5ä½“ä»¥ä¸Šæ²»ç™‚ã™ã‚‹', 'ğŸ¥', 'heal', 5, 200, 2, 0, 35),
('daily_gacha', 'ã‚¬ãƒãƒ£ã‚’å›ã™', 'ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¬ãƒãƒ£ã‚’1å›å›ã™', 'ğŸ°', 'gacha', 1, 150, 1, 0, 25),
('daily_post', 'æŠ•ç¨¿ã™ã‚‹', 'ãƒ•ã‚£ãƒ¼ãƒ‰ã«1å›æŠ•ç¨¿ã™ã‚‹', 'ğŸ“', 'post', 1, 100, 1, 0, 20),
('daily_quest', 'ã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢', 'ã‚¯ã‚¨ã‚¹ãƒˆã‚’1ã¤ã‚¯ãƒªã‚¢ã™ã‚‹', 'ğŸ“‹', 'quest', 1, 250, 2, 0, 45),
('daily_battle_3', 'æˆ¦é—˜ã‚’3å›', 'æˆ¦é—˜ã«3å›å‚åŠ ã™ã‚‹ï¼ˆæ”¾æµªãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼/æˆ¦äº‰/å é ˜æˆ¦ï¼‰', 'âš”ï¸', 'battle', 3, 600, 5, 1, 100),
('daily_train_50', 'å…µå£«ã‚’50ä½“è¨“ç·´', 'å…µå£«ã‚’50ä½“è¨“ç·´ã™ã‚‹', 'ğŸ–ï¸', 'train', 50, 500, 4, 0, 75),
('daily_collect_10', 'è³‡æºã‚’10å›åé›†', 'è³‡æºã‚’10å›åé›†ã™ã‚‹', 'ğŸ“¦', 'collect', 10, 400, 3, 0, 60),
('daily_focus', 'é›†ä¸­ã‚¿ã‚¹ã‚¯å®Œäº†', 'é›†ä¸­ã‚¿ã‚¹ã‚¯ã‚’1å›å®Œäº†ã™ã‚‹', 'ğŸ¯', 'focus', 1, 300, 3, 1, 50);

-- ===============================================
-- â‘¡ å…µç¨®ç›¸æ€§ã‚·ã‚¹ãƒ†ãƒ ã®èª¬æ˜ã‚³ãƒ¡ãƒ³ãƒˆ
-- ç¾è¡Œã®4ã™ãã¿ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¶­æŒ:
--   - æ­©å…µ(infantry) â†’ é è·é›¢(ranged)ã«å¼·ã„ã€é¨å…µ(cavalry)ã«å¼±ã„
--   - é¨å…µ(cavalry) â†’ æ­©å…µ(infantry)ã«å¼·ã„ã€é è·é›¢(ranged)ã«å¼±ã„
--   - é è·é›¢(ranged) â†’ é¨å…µ(cavalry)ã«å¼·ã„ã€æ­©å…µ(infantry)ã«å¼±ã„
--   - æ”»åŸ(siege) â†’ æ­©å…µ(infantry)ã«å¼·ã„ã€é¨å…µ(cavalry)ã«å¼±ã„
-- 
-- æ”»åŸå…µç¨®ã¯åŸå£ã‚„é˜²å¾¡æ–½è¨­ã«å¯¾ã—ã¦ç‰¹ã«åŠ¹æœçš„ã ãŒã€
-- æ©Ÿå‹•åŠ›ã®ã‚ã‚‹é¨å…µã«ã¯å¼±ã„ã€‚æ­©å…µã¸ã®æ”»æ’ƒã¯åŠ¹æœçš„ã€‚
-- ã“ã®ç›¸æ€§ã‚·ã‚¹ãƒ†ãƒ ã¯battle_engine.phpã®
-- calculateTroopAdvantageMultiplieré–¢æ•°ã§å®Ÿè£…æ¸ˆã¿ã€‚
-- ===============================================

-- ===============================================
-- å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
-- ===============================================
SELECT 'MiniBird feature fixes 2026 schema applied successfully' AS status;
